<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="1.11.2">
  <bpmn:process id="workaround" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_1sopxqk</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1sopxqk" sourceRef="StartEvent_1" targetRef="ExclusiveGateway_1sgbqvc" />
    <bpmn:parallelGateway id="ExclusiveGateway_1sgbqvc">
      <bpmn:incoming>SequenceFlow_1sopxqk</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0stysaf</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_11f1yzx</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0stysaf" sourceRef="ExclusiveGateway_1sgbqvc" targetRef="ExclusiveGateway_0r7b25h" />
    <bpmn:sequenceFlow id="SequenceFlow_11f1yzx" sourceRef="ExclusiveGateway_1sgbqvc" targetRef="ExclusiveGateway_1g7iyii" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0eikb1j" default="SequenceFlow_1yalhuw">
      <bpmn:incoming>SequenceFlow_1r6fjv0</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1yalhuw</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1tbqxin</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_1di50xw">
      <bpmn:incoming>SequenceFlow_0hfeajr</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0hfeajr" sourceRef="Task_077183j" targetRef="EndEvent_1di50xw" />
    <bpmn:serviceTask id="Task_077183j" name="Enable condition" camunda:expression="${execution.setVariable(&#39;conditionFulfilled&#39;, true)}">
      <bpmn:incoming>SequenceFlow_0j6rijz</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0hfeajr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0tvw21y" sourceRef="loopTask" targetRef="IntermediateThrowEvent_177ma1h" />
    <bpmn:intermediateCatchEvent id="IntermediateThrowEvent_177ma1h" name="Condition fulfilled?">
      <bpmn:incoming>SequenceFlow_0tvw21y</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1r6fjv0</bpmn:outgoing>
      <bpmn:conditionalEventDefinition>
        <bpmn:condition xsi:type="bpmn:tFormalExpression">${conditionFulfilled}</bpmn:condition>
      </bpmn:conditionalEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1r6fjv0" sourceRef="IntermediateThrowEvent_177ma1h" targetRef="ExclusiveGateway_0eikb1j" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0r7b25h">
      <bpmn:incoming>SequenceFlow_0stysaf</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1yalhuw</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_051wql9</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_051wql9" sourceRef="ExclusiveGateway_0r7b25h" targetRef="loopTask" />
    <bpmn:sequenceFlow id="SequenceFlow_1yalhuw" sourceRef="ExclusiveGateway_0eikb1j" targetRef="ExclusiveGateway_0r7b25h" />
    <bpmn:endEvent id="EndEvent_1ilgiw0">
      <bpmn:incoming>SequenceFlow_03ow19d</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1tbqxin" sourceRef="ExclusiveGateway_0eikb1j" targetRef="afterLoopTask">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression"><![CDATA[${iteration >= 2}]]></bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:eventBasedGateway id="ExclusiveGateway_1g7iyii">
      <bpmn:incoming>SequenceFlow_11f1yzx</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1b9wqet</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="IntermediateCatchEvent_02w9ov4" name="EnableCondition">
      <bpmn:incoming>SequenceFlow_1b9wqet</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0j6rijz</bpmn:outgoing>
      <bpmn:messageEventDefinition messageRef="Message_0zlveok" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1b9wqet" sourceRef="ExclusiveGateway_1g7iyii" targetRef="IntermediateCatchEvent_02w9ov4" />
    <bpmn:sequenceFlow id="SequenceFlow_0j6rijz" sourceRef="IntermediateCatchEvent_02w9ov4" targetRef="Task_077183j" />
    <bpmn:sequenceFlow id="SequenceFlow_03ow19d" sourceRef="afterLoopTask" targetRef="EndEvent_1ilgiw0" />
    <bpmn:userTask id="afterLoopTask" name="loop done">
      <bpmn:incoming>SequenceFlow_1tbqxin</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_03ow19d</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="loopTask" name="Do things in loop">
      <bpmn:incoming>SequenceFlow_051wql9</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0tvw21y</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:textAnnotation id="TextAnnotation_19kl58n">
      <bpmn:text>Enable condition by setting variable on process instance level</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_18rfwe2" sourceRef="Task_077183j" targetRef="TextAnnotation_19kl58n" />
  </bpmn:process>
  <bpmn:message id="Message_0zlveok" name="EnableCondition" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="workaround">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="197" y="298" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="170" y="334" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1sopxqk_di" bpmnElement="SequenceFlow_1sopxqk">
        <di:waypoint xsi:type="dc:Point" x="233" y="316" />
        <di:waypoint xsi:type="dc:Point" x="281" y="316" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="257" y="295" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ParallelGateway_1taalja_di" bpmnElement="ExclusiveGateway_1sgbqvc">
        <dc:Bounds x="281" y="291" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="306" y="345" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0stysaf_di" bpmnElement="SequenceFlow_0stysaf">
        <di:waypoint xsi:type="dc:Point" x="306" y="291" />
        <di:waypoint xsi:type="dc:Point" x="306" y="209" />
        <di:waypoint xsi:type="dc:Point" x="359" y="209" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="321" y="244" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_11f1yzx_di" bpmnElement="SequenceFlow_11f1yzx">
        <di:waypoint xsi:type="dc:Point" x="306" y="341" />
        <di:waypoint xsi:type="dc:Point" x="306" y="413" />
        <di:waypoint xsi:type="dc:Point" x="384" y="413" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="321" y="371" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0eikb1j_di" bpmnElement="ExclusiveGateway_0eikb1j" isMarkerVisible="true">
        <dc:Bounds x="732" y="184" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="757" y="238" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1di50xw_di" bpmnElement="EndEvent_1di50xw">
        <dc:Bounds x="739" y="338" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="757" y="378" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0hfeajr_di" bpmnElement="SequenceFlow_0hfeajr">
        <di:waypoint xsi:type="dc:Point" x="679" y="356" />
        <di:waypoint xsi:type="dc:Point" x="739" y="356" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="709" y="335" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0oijc86_di" bpmnElement="Task_077183j">
        <dc:Bounds x="579" y="316" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0tvw21y_di" bpmnElement="SequenceFlow_0tvw21y">
        <di:waypoint xsi:type="dc:Point" x="589" y="209" />
        <di:waypoint xsi:type="dc:Point" x="648" y="209" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="573.5" y="188" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_0eo57tj_di" bpmnElement="IntermediateThrowEvent_177ma1h">
        <dc:Bounds x="648" y="191" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="642" y="231" width="48" height="24" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1r6fjv0_di" bpmnElement="SequenceFlow_1r6fjv0">
        <di:waypoint xsi:type="dc:Point" x="684" y="209" />
        <di:waypoint xsi:type="dc:Point" x="732" y="209" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="708" y="188" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0r7b25h_di" bpmnElement="ExclusiveGateway_0r7b25h" isMarkerVisible="true">
        <dc:Bounds x="359" y="184" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="384" y="238" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_051wql9_di" bpmnElement="SequenceFlow_051wql9">
        <di:waypoint xsi:type="dc:Point" x="409" y="209" />
        <di:waypoint xsi:type="dc:Point" x="489" y="209" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="404" y="188" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1yalhuw_di" bpmnElement="SequenceFlow_1yalhuw">
        <di:waypoint xsi:type="dc:Point" x="757" y="184" />
        <di:waypoint xsi:type="dc:Point" x="757" y="103" />
        <di:waypoint xsi:type="dc:Point" x="384" y="103" />
        <di:waypoint xsi:type="dc:Point" x="384" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="570.5" y="82" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1ilgiw0_di" bpmnElement="EndEvent_1ilgiw0">
        <dc:Bounds x="980" y="191" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="953" y="231" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1tbqxin_di" bpmnElement="SequenceFlow_1tbqxin">
        <di:waypoint xsi:type="dc:Point" x="782" y="209" />
        <di:waypoint xsi:type="dc:Point" x="836" y="209" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="764" y="188" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EventBasedGateway_0ogx61i_di" bpmnElement="ExclusiveGateway_1g7iyii">
        <dc:Bounds x="384" y="388" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="409" y="442" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="IntermediateCatchEvent_02w9ov4_di" bpmnElement="IntermediateCatchEvent_02w9ov4">
        <dc:Bounds x="469" y="338" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="445" y="378" width="84" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1b9wqet_di" bpmnElement="SequenceFlow_1b9wqet">
        <di:waypoint xsi:type="dc:Point" x="409" y="388" />
        <di:waypoint xsi:type="dc:Point" x="409" y="356" />
        <di:waypoint xsi:type="dc:Point" x="469" y="356" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="424" y="366" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0j6rijz_di" bpmnElement="SequenceFlow_0j6rijz">
        <di:waypoint xsi:type="dc:Point" x="505" y="356" />
        <di:waypoint xsi:type="dc:Point" x="579" y="356" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="542" y="335" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_19kl58n_di" bpmnElement="TextAnnotation_19kl58n">
        <dc:Bounds x="688" y="424" width="100" height="82" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_18rfwe2_di" bpmnElement="Association_18rfwe2">
        <di:waypoint xsi:type="dc:Point" x="669" y="396" />
        <di:waypoint xsi:type="dc:Point" x="697" y="424" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_03ow19d_di" bpmnElement="SequenceFlow_03ow19d">
        <di:waypoint xsi:type="dc:Point" x="936" y="209" />
        <di:waypoint xsi:type="dc:Point" x="980" y="209" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="958" y="188" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_03i9txd_di" bpmnElement="afterLoopTask">
        <dc:Bounds x="836" y="169" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0sbka8e_di" bpmnElement="loopTask">
        <dc:Bounds x="489" y="169" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
